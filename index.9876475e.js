let e=[void 0,void 0,void 0,void 0].map(()=>[,,,,].fill(0)),t=0,r=!1;const n=document.querySelectorAll(".field-cell"),o=document.getElementById("start-button"),l=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],s={Start:document.getElementById("message-start"),Lose:document.getElementById("message-lose"),Winner:document.getElementById("message-win")};o.addEventListener("click",function(){i(),c(),d(e),d(e),a(e,n)});const i=()=>{t=0,r=!1,document.querySelector(".game-score").innerText=t,e=[void 0,void 0,void 0,void 0].map(()=>[,,,,].fill(0)),s.Winner.classList.add("hidden"),s.Lose.classList.add("hidden")};function d(e){let t=[];if(e.forEach((e,r)=>{e.forEach((e,n)=>{0===e&&t.push({roWinnerdex:r,colIndex:n})})}),t.length>0){let r=Math.floor(Math.random()*t.length),n=t[r];e[n.roWinnerdex][n.colIndex]=.9>Math.random()?2:4}}const a=(e,t)=>{e.forEach((r,n)=>{r.forEach((r,o)=>{let l=t[n*e.length+o];r>0?(l.textContent=r,l.classList=`field-cell field-cell--${r}`):(l.textContent=null,l.classList="field-cell")})})},c=()=>{o.classList+=" restart",o.innerText="Restart",o.style="border: 2px solid red; color: #776e65; outline: none;",s.Start.classList.add("hidden")};document.addEventListener("keyup",o=>{if(!l.includes(o.key)||r)return;let s=JSON.parse(JSON.stringify(e));switch(o.key){case"ArrowLeft":u(),p(e),L(e);break;case"ArrowRight":m(),p(e),L(e);break;case"ArrowUp":(function(){let t=g(e);e=g(t.map(e=>v(e)))})(),p(e),L(e);break;case"ArrowDown":let i;i=g(e),p(e=g(i=i.map(e=>v(e.reverse()).reverse()))),L(e)}document.querySelector(".game-score").innerText=t,f(s)&&(d(e),a(e,n))});const f=t=>{for(let r=0;r<4;r++)for(let n=0;n<4;n++)if(t[r][n]!==e[r][n])return!0;return!1},u=()=>{e=e.map(e=>v(e))},m=()=>{e=e.map(e=>v(e.reverse()).reverse())},h=e=>e.filter(Boolean),v=e=>{let r=h(e);for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]*=2,r[e+1]=0,t+=r[e]);for(r=h(r);r.length<4;)r.push(0);return r};function g(e){return e.map((e,t,r)=>e.map((e,n)=>r[n][t]))}const p=e=>{e.forEach(e=>{e.forEach(e=>{e>=2048&&(r=!0,s.Start.classList.remove("hidden"))})})};function L(){e.every(e=>e.every(e=>0!==e))&&!function(){for(let t=0;t<4;t++)for(let r=0;r<4;r++){let n=e[t][r];if(0!==n&&(t<3&&n===e[t+1][r]||r<3&&n===e[t][r+1]))return!0}return!1}()&&s.Lose.classList.remove("hidden")}
//# sourceMappingURL=index.9876475e.js.map
